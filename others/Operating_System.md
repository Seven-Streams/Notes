# 操作系统

## Lec 1

### 为什么学操作系统？

学任何东西的原因：**重走从无到有的发现历程** by JYY

概念的产生的动机，基本方法，弯路...

应用、创新、革命

操作系统的动机：更快更好地服务更多应用

操作系统的基本方法： "Building Abstractions"

### 学习操作系统能得到什么？

- 了解一些原理，比如窗口如何创建、 Ctrl+C 为什么有的时候不能退出程序等等。

- 能够实现平常用的一些东西。

### 什么是操作系统

操作系统是**管理软/硬件资源、为程序提供服务**的程序。

计算机硬件：

- 极简的公理系统（时钟，导线，逻辑门等等）

- 可以支持非常复杂的电路设计

在本课程中，可以认为操作系统是硬件和软件的中间层。

计算机硬件的发展需求操作系统

1950-1960: 磁芯内存

1950s - 1960s 的操作系统：库函数和管理程序排队运行的调度代码。操作系统的概念大概从这里形成。因为这个时候计算机还很贵，需要人工给小卡片来输入...

1960s - 1970s 的操作系统：能载入多个程序到内存并且调度它们的管理程序。防止程序之间互相干扰。

本节课的主要概念在 70 年代就形成了。

## Lec 2 应用视角的操作系统

- 什么是程序？

- 如何在操作系统上构造程序？

- 编译器的原理是什么？

处理器是状态机

problem: 程序为什么可以停下来？计算机为什么可以关机？

给操作系统发送 syscall

所有的程序也都是状态机

操作系统上的应用程序

提问

`strace` 用于追踪程序的进行

操作系统的职责就是管理和提供舒适的 API

C 语言也是一种状态机

递归和非递归

Problem: 怎么用状态表示递归函数？

那么，我们到底该如何定义状态？

状态：栈帧（含 PC ）+全局变量

函数调用：放入一个栈帧

函数返回：弹出一个栈帧

编译器优化

不改变语义：系统调用的操作完全相同

外部调用是不可优化的

systemcall 真的不可优化？
